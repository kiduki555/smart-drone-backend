# 시스템 아키텍처

## 개요
Smart GCS Backend는 NestJS 기반의 마이크로서비스 아키텍처를 따릅니다.

## 아키텍처 다이어그램
```
[Client] <-> [API Gateway] <-> [Microservices]
                                    |
                                    v
[Database] <-> [Redis Cache] <-> [MQTT Broker]
```

## 주요 컴포넌트

### 1. API Gateway
- 요청 라우팅
- 인증/인가 처리
- 요청/응답 변환
- 로드 밸런싱

### 2. 마이크로서비스
- Auth Service: 인증/인가 처리
- Drone Service: 드론 관리
- Mavlink Service: MAVLink 통신
- System Service: 시스템 관리

### 3. 데이터 계층
- MongoDB: 주 데이터 저장
- Redis: 캐싱 및 세션 관리
- MQTT: 실시간 메시징

## 통신 흐름

### 1. 클라이언트 요청
1. API Gateway에서 요청 수신
2. 인증/인가 검증
3. 적절한 마이크로서비스로 라우팅

### 2. 서비스 간 통신
1. REST API: 동기 통신
2. MQTT: 비동기 메시징
3. Redis Pub/Sub: 이벤트 기반 통신

### 3. 데이터 흐름
1. MongoDB: 영구 데이터 저장
2. Redis: 캐싱 및 세션
3. MQTT: 실시간 데이터 스트리밍

## 보안 아키텍처

### 1. 인증
- JWT 기반 인증
- 토큰 갱신 메커니즘
- 세션 관리

### 2. 인가
- 역할 기반 접근 제어 (RBAC)
- 리소스 수준 권한 검증
- API 키 관리

### 3. 데이터 보안
- TLS 암호화
- 데이터 암호화 저장
- 보안 로깅

## 확장성

### 1. 수평적 확장
- 마이크로서비스 독립적 스케일링
- 로드 밸런싱
- 컨테이너 오케스트레이션

### 2. 수직적 확장
- 리소스 최적화
- 캐싱 전략
- 데이터베이스 샤딩

## 모니터링

### 1. 시스템 모니터링
- CPU/메모리 사용량
- 네트워크 트래픽
- 디스크 사용량

### 2. 애플리케이션 모니터링
- API 응답 시간
- 에러율
- 트랜잭션 추적

### 3. 비즈니스 모니터링
- 사용자 활동
- 시스템 사용량
- 성능 메트릭 